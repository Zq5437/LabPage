# 数据库Schema检查报告

检查时间: 2025-10-20

## 检查结果

对比了 MySQL 数据库 `lab_website` 的实际表结构与 `database/schema.sql` 文件，发现以下差异：

### 1. 缺失的字段

#### 1.1 `admins` 表缺少字段
- **字段名**: `avatar`
- **类型**: `VARCHAR(500)`
- **说明**: 管理员头像图片路径
- **是否在页面中使用**: ✅ 是
  - 使用位置:
    - `admin/src/layout/components/AdminHeader.vue`
    - `admin/src/layout/components/AdminSidebar.vue`
    - `admin/src/views/Profile.vue`
    - `backend/routes/auth.js` (包含上传头像接口)

#### 1.2 `lab_info` 表缺少字段
- **字段名**: `introduction`
- **类型**: `TEXT`
- **说明**: 实验室详细介绍
- **是否在页面中使用**: ✅ 是
  - 使用位置:
    - `admin/src/views/LabInfo.vue`
    - `backend/routes/lab-info.js` (包含introduction字段的读写)

#### 1.3 `research_areas` 表缺少字段
- **字段名**: `keywords`
- **类型**: `VARCHAR(500)`
- **说明**: 研究方向关键词
- **是否在页面中使用**: ✅ 是
  - 使用位置:
    - `admin/src/views/ResearchAreas.vue`
    - `admin/src/views/publications/Form.vue`
    - `admin/src/views/publications/Index.vue`
    - `backend/routes/research-areas.js` (在查询和创建/更新中使用)

### 2. 未使用的表（已删除）

#### 2.1 `todos` 表（已删除）
- **说明**: 待办事项表
- **是否在页面中使用**: ❌ 否
  - 说明: 虽然数据库中存在todos表，但在项目代码中未实际使用
  - 前端有TodoList组件但使用mock数据，Dashboard页面未引用该组件
  - 后端无相关API路由
  - **已删除**: ✅ 已从schema.sql和数据库中删除

## 已执行的修复操作

### 阶段一：添加缺失字段
已更新 `database/schema.sql` 文件，添加了以下内容：

1. ✅ 在 `admins` 表中添加 `avatar` 字段
2. ✅ 在 `lab_info` 表中添加 `introduction` 字段
3. ✅ 在 `research_areas` 表中添加 `keywords` 字段

### 阶段二：清理未使用功能
已删除未实现的TODOs功能：

1. ✅ 删除 `admin/src/components/dashboard/TodoList.vue` 组件文件
2. ✅ 从 `database/schema.sql` 中删除 `todos` 表定义
3. ✅ 从 MySQL 数据库中删除 `todos` 表

## 建议

1. **已使用的字段**: `avatar`、`introduction` 和 `keywords` 这三个字段在前端和后端都有实际使用，已添加到schema中。

2. **数据库迁移**: 现在可以直接使用更新后的 `schema.sql` 文件在新环境创建完整的数据库结构。所有表结构已与实际使用情况保持一致。

## 验证建议

在新环境中部署时，建议：
1. 使用更新后的 `schema.sql` 创建数据库
2. 测试管理员头像上传功能
3. 测试实验室信息的introduction字段显示
4. 测试研究方向的keywords字段功能

